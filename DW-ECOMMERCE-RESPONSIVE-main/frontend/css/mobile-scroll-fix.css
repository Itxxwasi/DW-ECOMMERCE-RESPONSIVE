/**
 * Mobile Scroll Fix - Comprehensive Fix for Shop Page Scrolling
 * Ensures html, body, and all containers allow natural scrolling on mobile
 */

/* ============================================
   CRITICAL: HTML AND BODY SCROLLING FIXES
   ============================================ */

@media (max-width: 991px) {
    /* CRITICAL FIX: html must have height: auto (not 100%) to allow scrolling */
    html {
        overflow-x: hidden !important;
        overflow-y: auto !important;
        height: auto !important; /* CRITICAL: Changed from 100% to auto */
        min-height: 100% !important;
        -webkit-overflow-scrolling: touch !important;
        overscroll-behavior-y: auto !important;
        overscroll-behavior-x: none !important;
    }
    
    /* CRITICAL FIX: body must have height: auto and overflow-y: auto */
    body {
        overflow-x: hidden !important;
        overflow-y: auto !important; /* CRITICAL: Must be auto */
        height: auto !important; /* CRITICAL: Must be auto, not 100vh */
        min-height: 100vh !important;
        position: relative !important; /* CRITICAL: Must be relative, not fixed */
        width: 100% !important;
        -webkit-overflow-scrolling: touch !important;
        overscroll-behavior-y: auto !important;
        overscroll-behavior-x: none !important;
        touch-action: pan-y pinch-zoom !important; /* Allow vertical panning */
    }
    
    /* Only prevent scroll when menu/filter is actually open */
    body.menu-open:not(.filter-sidebar-open),
    body.filter-sidebar-open:not(.menu-open),
    body.menu-open.filter-sidebar-open {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
        height: 100% !important;
        touch-action: none !important;
    }
    
    /* When menus are closed, ensure scrolling works */
    body:not(.menu-open):not(.filter-sidebar-open) {
        overflow-y: auto !important;
        overflow-x: hidden !important;
        position: relative !important;
        height: auto !important;
        touch-action: pan-y pinch-zoom !important;
    }
}

/* ============================================
   MAIN CONTENT CONTAINERS - NO SCROLL BLOCKING
   ============================================ */

@media (max-width: 991px) {
    /* Main content should NOT create scroll container - let body scroll */
    main,
    .main-content {
        overflow-y: visible !important; /* CRITICAL: visible, not auto */
        overflow-x: hidden !important;
        position: relative !important;
        height: auto !important;
        min-height: auto !important;
        max-height: none !important;
        -webkit-overflow-scrolling: touch !important;
        padding-bottom: 80px !important; /* Space for mobile bottom nav */
    }
    
    /* Container fluid should not prevent scrolling */
    .container-fluid {
        overflow-y: visible !important;
        overflow-x: hidden !important;
        height: auto !important;
        max-height: none !important;
        position: relative !important;
    }
    
    /* Products listing container should not create scroll container */
    .products-listing-container {
        overflow-y: visible !important;
        overflow-x: hidden !important;
        position: relative !important;
        height: auto !important;
        min-height: auto !important;
        max-height: none !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    /* Products area should not create scroll container */
    .products-area {
        overflow-y: visible !important;
        overflow-x: hidden !important;
        position: relative !important;
        height: auto !important;
        min-height: auto !important;
        max-height: none !important;
    }
    
    /* Products grid should not create scroll container */
    #productsGrid,
    .products-grid {
        overflow-y: visible !important;
        overflow-x: hidden !important;
        height: auto !important;
        max-height: none !important;
        position: relative !important;
    }
}

/* ============================================
   HEADER AND FOOTER - DON'T BLOCK SCROLLING
   ============================================ */

@media (max-width: 991px) {
    /* Header should be sticky, not fixed */
    .header-container {
        position: sticky !important;
        top: 0 !important;
        z-index: 1000 !important;
        background: #fff !important;
    }
    
    /* Mobile bottom nav should be fixed but not block scrolling */
    .mobile-bottom-nav {
        position: fixed !important;
        bottom: 0 !important;
        z-index: 999 !important;
        background: #fff !important;
        width: 100% !important;
    }
}

/* ============================================
   FILTER OVERLAY - PREVENT SCROLL WHEN OPEN
   ============================================ */

@media (max-width: 991px) {
    /* Filter overlay should prevent body scroll when active */
    body.filter-overlay-active {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
        height: 100% !important;
        touch-action: none !important;
    }
    
    /* Filter sidebar should scroll independently when open */
    .filter-sidebar.active {
        overflow-y: auto !important;
        overflow-x: hidden !important;
        -webkit-overflow-scrolling: touch !important;
        overscroll-behavior: contain !important;
    }
}

